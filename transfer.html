<!DOCTYPE HTML>
<HTML>
<HEAD>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- mobile metas -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="initial-scale=1, maximum-scale=1">
<!-- site metas -->
<title>Transfer page-CRYPTOBANK</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">
<!-- bootstrap css -->
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/mystyles.css">
<!-- style css -->
<link rel="stylesheet" type="text/css" href="css/style.css">
<!-- Responsive-->
<link rel="stylesheet" href="css/responsive.css">
<!-- Scrollbar Custom CSS -->
<link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
<!-- Tweaks for older IEs-->
<link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
<!-- owl stylesheets -->
<link rel="stylesheet" href="css/owl.carousel.min.css">
<link rel="stylesheet" href="css/owl.theme.default.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
</HEAD>
<BODY>
<div class="head_main">
		<div class="container">
			<div class="logo"><h1 class="heading">CRYPTOBANK</h1>
			<h4><em><ins class="misc">The secured banking system</ins></em></h4></div>
		</div>
	</div>
		<div class="header">
		<div class="container">
        <!--  header inner -->
            <div class="col-sm-12">

                 <div class="menu-area">
                    <nav class="navbar navbar-expand-lg ">
                        <!-- <a class="navbar-brand" href="#">Menu</a> -->
<button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                       <i class="fa fa-bars"></i>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav mr-auto">
                               <li class="nav-item active">
                                <a class="nav-link" href="homepage.html">HOME<span class="sr-only">(current)</span></a> </li>
                               <li class="nav-item">
                                <a class="nav-link" href="customer.html">VIEW CUSTOMERS</a></li>
                               <li class="#" href="#">
      	                       <a class="nav-link" href="transfer.html">TRANSFER MONEY</a></li>
							    <a class="nav-link" href="transact.html">TRANSACTION HISTORY</a></li>
                               <li class="nav-item" href="#">
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
	<div class="about_main">
    <div class="services_main">
    	<div class="container">
    		<div class="creative_taital">
    			<h1 class="creative_text">TRANSACTION PAGE</h1>
				<br>
				<p style="color: #050000; text-align: center;">Select one customer at a time<p>
				<p style="color: #050000; text-align: center;">At first donor and then recepient<p>
				<table class="tab" align="center" style="color: #050000">
				  <tr>
					<th>Name</th>
					<th>Select</th>
				  </tr>
				  <tr>
					<td><label for="Aniket Saha">Aniket Saha</label></td>
					<td><input type="radio" name="name" id="namebox1" value="Aniket Saha"></td>
				  </tr>
				  <tr>
					<td><label for="Hrithik Roshan">Hrithik Roshan</label></td>
					<td><input type="radio" name="name" id="namebox2" value="Hrithik Roshan"></td>
				  </tr>
				  <tr>
					<td><label for="Sourav Ganguly">Sourav Ganguly</label></td>
					<td><input type="radio" name="name" id="namebox3" value="Sourav Ganguly"></td>
				  </tr>
				  <tr>
					<td><label for="Leonardo DiCaprio">Leonardo DiCaprio</label></td>
					<td><input type="radio" name="name" id="namebox4" value="Leonardo DiCaprio"></td>
				  </tr>
				  <tr>
					<td><label for="MS Dhoni">MS Dhoni</label></td>
					<td><input type="radio" name="name" id="namebox5"value="MS Dhoni"></td>
				  </tr>
				  <tr>
					<td><label for="Tom Cruise">Tom Cruise</label></td>
					<td><input type="radio" name="name" id="namebox6" value="Tom Cruise"></td>
				  </tr>
				  <tr>
					<td><label for="Elon Musk">Elon Musk</label></td>
					<td><input type="radio" name="name" id="namebox7" value="Elon Musk"></td>
				  </tr>
				  <tr>
					<td><label for="Tim Cook">Tim Cook</label></td>
					<td><input type="radio" name="name" id="namebox8" value="Tim Cook"></td>
				  </tr>
				  <tr>
					<td><label for="Warren Buffet">Warren Buffet</label></td>
					<td><input type="radio" name="name" id="namebox9" value="Warren Buffet"></td>
				  </tr>
				  <tr>
					<td><label for="ShahRukh Khan">ShahRukh Khan</label></td>
					<td><input type="radio" name="name" id="namebox10" value="ShahRukh Khan"></td>
				  </tr>
				</table>
				<div class="ro" align="center">
				  <div class="col" style="color: #050000;">
					<h2>Donor</h2>
					<br>
					<div class="btn_main">
						<button id="select1" type="button" class="usualbutton clickpri" >SELECT FOR DONOR</button>
					</div>
					<br>
					<p id = "nameprint1"></p>
					<p id = "balprint1"></p>
				  </div>
				  <div class="col"  style="color: #050000;">
					<h2>Recepient</h2>
					<br>
					<div class="btn_main">
						<button id="select2" type="button" class="usualbutton clickpri">SELECT FOR RECEPIENT</button>
					</div>
					<br>
					<p id = "nameprint2"></p>
					<p id = "balprint2"></p>
				  </div>
				</div>
				<p style="color: #050000; text-align: center;">Enter Amount to be transferred<p>
				<div class="btn_main">
					<input id="amtbox" type="text" value="0"></input>
					<br>
					<br>
					<button id="uptbox" type="button" class="usualbutton clickpri">TRANSFER</button>
				</div>
    		</div>
    	</div>

		<script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-app.js"></script>
		 <script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-auth.js"></script>
		 <script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-database.js"></script>
		 <script src="https://www.gstatic.com/firebasejs/8.2.2/firebase-analytics.js"></script>

		 <script id="Mainscript">
				  // Your web app's Firebase configuration
				  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
				  var firebaseConfig = {
					apiKey: "AIzaSyA44tymqvKoK2XHCdvwy8vZHgVbHCg2pxI",
					authDomain: "testingfirebase-866d4.firebaseapp.com",
					projectId: "testingfirebase-866d4",
					storageBucket: "testingfirebase-866d4.appspot.com",
					messagingSenderId: "614576734418",
					appId: "1:614576734418:web:01aae20a4d848b8858ad0b",
					measurementId: "G-RJZGSDJYDP"
				  };
				  // Initialize Firebase
				  firebase.initializeApp(firebaseConfig);
				  firebase.analytics();

				 //------------------------main code------------------------//
				 var namev,i,temp,amtv,balv1,balv2,namev1,namev2,n,m,p,q,sum,sub;
				 function Ready(){
							   for (i = 1; i <= 10; i++)
							   {
								  temp="namebox"+i.toString();
								  if ( document.getElementById(temp).checked)
								  {
										namev=document.getElementById(temp).value;
								  }
						       }

							  }
				//-------------------------select------------------------//

				document.getElementById('select1').onclick = function()
				{
					Ready();
					namev1 = namev;
					firebase.database().ref('customer'+namev1).on('value', function(snapshot){
								balv1 = snapshot.val().balance;
								document.getElementById('nameprint1').innerHTML= 'Name: ' + snapshot.val().Nameofcustomer;
								document.getElementById('balprint1').innerHTML= 'Balance: ' + snapshot.val().balance;
							});
				}
				document.getElementById('select2').onclick = function()
				{
					Ready();
					namev2 = namev;
					firebase.database().ref('customer'+namev2).on('value', function(snapshot){
								balv2 = snapshot.val().balance;
								document.getElementById('nameprint2').innerHTML='Name: ' + snapshot.val().Nameofcustomer;
								document.getElementById('balprint2').innerHTML='Balance: ' + snapshot.val().balance;
							});
				}
				function upt1()
				{
					n = parseInt(amtv);
					m=parseInt(balv1);
					sub=m-n;
					balv1=sub.toString();
					document.getElementById('balprint1').innerHTML= 'Balance: ' + balv1;
				}
				function upt2()
				{
					p=parseInt(amtv);
					q=parseInt(balv2);
					sum=p+q;
					balv2=sum.toString();
					document.getElementById('balprint2').innerHTML= 'Balance: ' + balv2;
				}
				function increment(inc)
				{
					inc++;
					return inc;

				}
				//-------------------------update------------------------//
				document.getElementById('uptbox').onclick = function(){
				amtv=document.getElementById('amtbox').value;
				if(isNaN(parseInt(amtv))){
					alert("Please enter a valid number to transfer");
				}else{
					upt1();
					firebase.database().ref('customer'+namev1).update({
						balance: balv1
						});
					upt2();
					firebase.database().ref('customer'+namev2).update({
						balance: balv2
						});
					firebase.database().ref('transact').push({
								Nameofdonor:namev1,
								Nameofrecepient:namev2,
								amount:amtv
							});

					}
					}


		 </script>
	<!-- Javascript files-->
      <script src="js/jquery.min.js"></script>
      <script src="js/popper.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
</BODY>
</HTML>